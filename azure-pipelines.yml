trigger:
- main

pool:
  vmImage: ubuntu-latest

stages:
- stage: Deploy
  displayName: Deploy to AKS
  jobs:
  - job: DeployApp
    displayName: Apply Kubernetes manifests
    steps:
    - task: KubernetesManifest@1
      displayName: Deploy application to AKS
      inputs:
        action: deploy
        kubernetesServiceConnection: aks-connection
        namespace: default
        manifests: |
          k8s/deployment.yaml
          k8s/service.yaml
